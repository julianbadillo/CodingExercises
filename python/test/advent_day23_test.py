from advent_day23 import *

    
def test_is_final():
    pods = [2, 3, 5, 6, 8, 9, 11, 12] 
    assert is_final(pods)


def test_is_valid_move():

    # #############
    # #...........#
    # ###B#C#B#D###
    #   #A#D#C#A#
    #   #########
    # #############
    # #01.4.7.0.34#
    # ###2#5#8#1###
    #   #3#6#9#2#
    #   #########
    #      [A   A  B  B  C  C  D   D ]
    pods = [3, 12, 2, 8, 5, 9, 6, 11] 
    assert not is_valid_move(0, 2, pods)
    assert is_valid_move(2, 1, pods)
    assert is_valid_move(2, 4, pods)
    assert not is_valid_move(6, 5, pods)

    # #############
    # #...B.......#
    # ###B#C#.#D###
    #   #A#D#C#A#
    #   #########
    #       A   A  B  B  C  C  D  D 
    pods = [3, 12, 2, 4, 5, 9, 6, 11]
    assert not is_valid_move(3, 2, pods)
    assert not is_valid_move(3, 5, pods)
    assert is_valid_move(3, 1, pods)
    assert is_valid_move(3, 7, pods)
    assert not is_valid_move(3, 8, pods)

def test_explore_test():
    # #############
    # #...........#
    # ###B#C#B#D###
    #   #A#D#C#A#
    #   #########
    # #############
    # #01.4.7.0.34#
    # ###2#5#8#1###
    #   #3#6#9#2#
    #   #########
    #      [A   A  B  B  C  C  D   D ]
    pods = [3, 12, 2, 8, 5, 9, 6, 11] 
    r = explore(pods)
    assert r == 12521

def test_explore_f():
    # #############
    # #...........#
    # ###B#D#C#A###
    #   #C#D#B#A#
    #   #########
    # #############
    # #01.4.7.0.34#
    # ###2#5#8#1###
    #   #3#6#9#2#
    #   #########
    #      [0   1  2  3  4  5  6   7]
    #      [A   A  B  B  C  C  D   D ]
    pods = [11, 12, 2, 9, 3, 8, 5, 6] 
    r = explore(pods)
    print("Min energy = ", r)



def test_score1():
    #      [0   1  2  3  4  5  6   7]
    #      [A   A  B  B  C  C  D   D ]
    pods = [3, 12, 2, 8, 5, 9, 6, 11] 
    steps = [(3, 7), #B
            (3, 4),  
            (4, 7),  #C
            (4, 8),
            (6, 5), #D
            (6, 7),
            (3, 5),# B
            (3, 6),
            (2, 4), # other B
            (2, 5),
            (7,10), #D
            (1, 11),#A
            (1, 13),
            (7, 11), # both D's
            (7, 12),
            (6, 10),
            (6, 11),
            (1,10), # final A
            (1,7),
            (1,4),
            (1,2)]
    total = score(pods, steps)
    assert total == 12521

def test_score2():
    # #############
    # #...........#
    # ###B#D#C#A###
    #   #C#D#B#A#
    #   #########
    # #############
    # #01.4.7.0.34#
    # ###2#5#8#1###
    #   #3#6#9#2#
    #   #########
    #      [0   1  2  3  4  5  6   7]
    #      [A   A  B  B  C  C  D   D ]
    pods = [11, 12, 2, 9, 3, 8, 5, 6] 
    steps = [(0,13), # move A's to the hall
            (0, 14),
            (1,11),
            (1,10),
            (1,7),
            (1,4),
            (1,1),
            (6,7), # move D's in place
            (6,10),
            (6,11),
            (6,12),
            (7,5),# other D
            (7,7),
            (7,10),
            (7,11),
    # 
    # #############
    # #.A.......A.#
    # ###B#.#C#D###
    #   #C#.#B#D#
    #   #########
    # 
            (2,4), # B to its place
            (2,5),
            (2,6),
    # """
    # #############
    # #.A.......A.#
    # ###.#.#C#D###
    #   #C#B#B#D#
    #   #########
    # """        
            (5,10), # C out
            (3,8), # second B to its place
            (3,7),
            (3,5),
    # """
    # #############
    # #.A.....C.A.#
    # ###.#B#.#D###
    #   #C#B#.#D#
    #   #########
    # """        
        # C to its place
        (5,8),
        (5,9),
        # other C to its place
        (4,2),
        (4,4),
        (4,7),
        (4,8),
        # A's to their place
        (1,2),
        (1,3),
        (0,13),
        (0,10),
        (0,7),
        (0,4),
        (0,2),
    ]
    total = score(pods, steps)
    print(f"Total score = {total}")


def test_score_large1():
    # #############
    # #...........#
    # ###B#C#B#D###
    #   #D#C#B#A#
    #   #D#B#A#C#
    #   #A#D#C#A#
    #   #########

    # #############
    # #01.2.3.4.56#
    # ###7#8#9#0###
    #   #1#2#3#4#
    #   #5#6#7#8#
    #   #9#0#1#2#
    #   #########

    pods = [
        #A
        14, 17, 19, 22,
        #B
        7, 9, 13, 16,
        #C
        8, 12, 18, 21,
        #D
        10, 11, 15, 20,
    ]
    steps =[
        # #############
        # #...........#
        # ###4#8#5#C###
        #   #D#9#6#0#
        #   #E#7#1#A#
        #   #2#F#B#3#
        #   #########
        (12,5),
        (12,6),
        # #############
        # #..........C#
        # ###4#8#5#.###
        #   #D#9#6#0#
        #   #E#7#1#A#
        #   #2#F#B#3#
        #   #########
        (0, 10),
        (0, 4),
        (0, 3),
        (0, 2),
        (0, 1),
        (0, 0),
        # #############
        # #0.........C#
        # ###4#8#5#.###
        #   #D#9#6#.#
        #   #E#7#1#A#
        #   #2#F#B#3#
        #   #########
        (5, 4),
        (5, 5),
        # #############
        # #0........5C#
        # ###4#8#.#.###
        #   #D#9#6#.#
        #   #E#7#1#A#
        #   #2#F#B#3#
        #   #########
        (6, 9),
        (6, 4),
        # #############
        # #0......6.5C#
        # ###4#8#.#.###
        #   #D#9#.#.#
        #   #E#7#1#A#
        #   #2#F#B#3#
        #   #########
        (1,13),
        (1,9),
        (1,3),
        (1,2),
        (1,1),
        # #############
        # #01.....6.5C#
        # ###4#8#.#.###
        #   #D#9#.#.#
        #   #E#7#.#A#
        #   #2#F#B#3#
        #   #########
        (8,3), 
        (8,9),
        (8,13),
        (8,17),
        # #############
        # #01.....6.5C#
        # ###4#.#.#.###
        #   #D#9#.#.#
        #   #E#7#8#A#
        #   #2#F#B#3#
        #   #########
        (9,8),
        (9,3),
        (9,9),
        (9,13),
        # #############
        # #01.....6.5C#
        # ###4#.#.#.###
        #   #D#.#9#.#
        #   #E#7#8#A#
        #   #2#F#B#3#
        #   #########
        (7,12),
        (7,8),
        (7,3),
        # #############
        # #01...7.6.5C#
        # ###4#.#.#.###
        #   #D#.#9#.#
        #   #E#.#8#A#
        #   #2#F#B#3#
        #   #########
        (15,16),
        (15,12),
        (15,8),
        (15,2),
        # #############
        # #01.F.7.6.5C#
        # ###4#.#.#.###
        #   #D#.#9#.#
        #   #E#.#8#A#
        #   #2#.#B#3#
        #   #########
        (7,8),
        (7,12),
        (7,16),
        (7,20),
        # #############
        # #01.F...6.5C#
        # ###4#.#.#.###
        #   #D#.#9#.#
        #   #E#.#8#A#
        #   #2#7#B#3#
        #   #########
        (6,3),
        (6,8),
        (6,12),
        (6,16),
        # #############
        # #01.F.....5C#
        # ###4#.#.#.###
        #   #D#.#9#.#
        #   #E#6#8#A#
        #   #2#7#B#3#
        #   #########
        (5,4),
        (5,3),
        (5,8),
        (5,12),
        # #############
        # #01.F......C#
        # ###4#.#.#.###
        #   #D#5#9#.#
        #   #E#6#8#A#
        #   #2#7#B#3#
        #   #########
        (10,14),
        (10,10),
        (10,4),
        (10,9),
        # #############
        # #01.F......C#
        # ###4#.#A#.###
        #   #D#5#9#.#
        #   #E#6#8#.#
        #   #2#7#B#3#
        #   #########
        (3,18),
        (3,14),
        (3,10),
        (3,5),
        # #############
        # #01.F.....3C#
        # ###4#.#A#.###
        #   #D#5#9#.#
        #   #E#6#8#.#
        #   #2#7#B#.#
        #   #########
        (15,3),
        (15,4),
        (15,10),
        (15,14),
        (15,18),
        (15,22),
        # #############
        # #01.......3C#
        # ###4#.#A#.###
        #   #D#5#9#.#
        #   #E#6#8#.#
        #   #2#7#B#F#
        #   #########
        (4,2),
        (4,8),
        # #############
        # #01.......3C#
        # ###.#4#A#.###
        #   #D#5#9#.#
        #   #E#6#8#.#
        #   #2#7#B#F#
        #   #########
        (13,7),
        (13,2),
        (13,3),
        (13,4),
        (13,10),
        (13,14),
        (13,18),
        # #############
        # #01.......3C#
        # ###.#4#A#.###
        #   #.#5#9#.#
        #   #E#6#8#D#
        #   #2#7#B#F#
        #   #########
        (14,11),
        (14,7),
        (14,2),
        (14,3),
        (14,4),
        (14,10),
        (14,14),
        # #############
        # #01.......3C#
        # ###.#4#A#.###
        #   #.#5#9#E#
        #   #.#6#8#D#
        #   #2#7#B#F#
        #   #########
        (1,7),
        (1,11),
        (1,15),
        
        (0,1),
        (0,7),
        (0,11),
        # #############
        # #.........3C#
        # ###.#4#A#.###
        #   #0#5#9#E#
        #   #1#6#8#D#
        #   #2#7#B#F#
        #   #########
        (3,4),
        (3,3),
        (3,2),
        (3,7),
        # #############
        # #..........C#
        # ###3#4#A#.###
        #   #0#5#9#E#
        #   #1#6#8#D#
        #   #2#7#B#F#
        #   #########
        (12, 5),
        (12, 10),
    ]

    r = score_large(pods, steps)
    assert r == 44169

        # #############
        # #01.2.3.4.56#
        # ###7#8#9#0###
        #   #1#2#3#4#
        #   #5#6#7#8#
        #   #9#0#1#2#
        #   #########


def test_explore_large_test():
    # #############
    # #...........#
    # ###B#C#B#D###
    #   #D#C#B#A#
    #   #D#B#A#C#
    #   #A#D#C#A#
    #   #########

    # #############
    # #01.2.3.4.56#
    # ###7#8#9#0###
    #   #1#2#3#4#
    #   #5#6#7#8#
    #   #9#0#1#2#
    #   #########

    pods = [
        #A
        14, 17, 19, 22,
        #B
        7, 9, 13, 16,
        #C
        8, 12, 18, 21,
        #D
        10, 11, 15, 20,
    ]
    r = explore_large(pods)
    assert r == 44169






def test_score_large2():

    pods = [
            #A
            10, 14, 17, 22,
            #B
            7, 13, 16, 21,
            #C
            9, 12, 18, 19,
            #D
            8, 11, 15, 20,
        ]
    steps = [
    # #############
    # #...........#
    # ###4#C#8#0###
    #   #D#9#5#1#
    #   #E#6#2#A#
    #   #B#F#7#3#
    #   #########
    (12, 2),
    (12, 1),
    (12, 0),
    # #############
    # #C..........#
    # ###4#.#8#0###
    #   #D#9#5#1#
    #   #E#6#2#A#
    #   #B#F#7#3#
    #   #########
    (9,8),
    (9,2),
    (9,1),
    # #############
    # #C9.........#
    # ###4#.#8#0###
    #   #D#.#5#1#
    #   #E#6#2#A#
    #   #B#F#7#3#
    #   #########
    (6,12),
    (6,8),
    (6,2),
    # #############
    # #C9.6.......#
    # ###4#.#8#0###
    #   #D#.#5#1#
    #   #E#.#2#A#
    #   #B#F#7#3#
    #   #########
    (15,16),
    (15,12),
    (15,8),
    (15,3),
    (15,4),
    (15,5),
    (15,6),
    # #############
    # #C9.6......F#
    # ###4#.#8#0###
    #   #D#.#5#1#
    #   #E#.#2#A#
    #   #B#.#7#3#
    #   #########
    (6,8),
    (6,12),
    (6,16),
    (6,20),
    # #############
    # #C9........F#
    # ###4#.#8#0###
    #   #D#.#5#1#
    #   #E#.#2#A#
    #   #B#6#7#3#
    #   #########
    (4,2),
    (4,8),
    (4,12),
    (4,16),
    # #############
    # #C9........F#
    # ###.#.#8#0###
    #   #D#.#5#1#
    #   #E#4#2#A#
    #   #B#6#7#3#
    #   #########
    (8,4),
    # #############
    # #C9.....8..F#
    # ###.#.#.#0###
    #   #D#.#5#1#
    #   #E#4#2#A#
    #   #B#6#7#3#
    #   #########
    (5,9),
    (5,3),
    (5,8),
    (5,12),
    # #############
    # #C9.....8..F#
    # ###.#.#.#0###
    #   #D#5#.#1#
    #   #E#4#2#A#
    #   #B#6#7#3#
    #   #########
    (2,13),
    (2,9),
    (2,3),
    (2,2),
    # #############
    # #C9.2...8..F#
    # ###.#.#.#0###
    #   #D#5#.#1#
    #   #E#4#.#A#
    #   #B#6#7#3#
    #   #########
    (7,17),
    (7,13),
    (7,9),
    (7,3),
    (7,8),
    # #############
    # #C9.2...8..F#
    # ###.#7#.#0###
    #   #D#5#.#1#
    #   #E#4#.#A#
    #   #B#6#.#3#
    #   #########
    (8,9),
    (8,13),
    (8,17),
    (8,21),
    # #############
    # #C9.2......F#
    # ###.#7#.#0###
    #   #D#5#.#1#
    #   #E#4#.#A#
    #   #B#6#8#3#
    #   #########
    (2,3),
    (2,4),
    # #############
    # #C9.....2..F#
    # ###.#7#.#0###
    #   #D#5#.#1#
    #   #E#4#.#A#
    #   #B#6#8#3#
    #   #########
    (9,2),
    (9,3),
    (9,9),
    (9,13),
    (9,17),
    # #############
    # #C......2..F#
    # ###.#7#.#0###
    #   #D#5#.#1#
    #   #E#4#9#A#
    #   #B#6#8#3#
    #   #########
    (2,3),
    (2,2),
    (2,1),
    # #############
    # #C2........F#
    # ###.#7#.#0###
    #   #D#5#.#1#
    #   #E#4#9#A#
    #   #B#6#8#3#
    #   #########
    (13,7),
    (13,2),
    (13,3),
    (13,4),
    (13,5),
    # #############
    # #C2.......DF#
    # ###.#7#.#0###
    #   #.#5#.#1#
    #   #E#4#9#A#
    #   #B#6#8#3#
    #   #########
    (14,11),
    (14,7),
    (14,2),
    (14,3),
    (14,4),
    # #############
    # #C2.....E.DF#
    # ###.#7#.#0###
    #   #.#5#.#1#
    #   #.#4#9#A#
    #   #B#6#8#3#
    #   #########
    (11,15),
    (11,11),
    (11,7),
    (11,2),
    (11,3),
    (11,9),
    (11,13),
    # #############
    # #C2.....E.DF#
    # ###.#7#.#0###
    #   #.#5#B#1#
    #   #.#4#9#A#
    #   #.#6#8#3#
    #   #########
    (2,7),
    (2,11),
    (2,15),
    (2,19),
    # #############
    # #C......E.DF#
    # ###.#7#.#0###
    #   #.#5#B#1#
    #   #.#4#9#A#
    #   #2#6#8#3#
    #   #########
    (14,3),
    (14,2),
    (14,1),
    # #############
    # #CE.......DF#
    # ###.#7#.#0###
    #   #.#5#B#1#
    #   #.#4#9#A#
    #   #2#6#8#3#
    #   #########
    (0,4),
    (0,3),
    (0,2),
    (0,7),
    (0,11),
    (0,15),
    # #############
    # #CE.......DF#
    # ###.#7#.#.###
    #   #.#5#B#1#
    #   #0#4#9#A#
    #   #2#6#8#3#
    #   #########
    (1,10),
    (1,4),
    (1,3),
    (1,2),
    (1,7),
    (1, 11),
    # #############
    # #CE.......DF#
    # ###.#7#.#.###
    #   #1#5#B#.#
    #   #0#4#9#A#
    #   #2#6#8#3#
    #   #########
    (10,14),
    (10,10),
    (10,4),
    (10,9),
    # #############
    # #CE.......DF#
    # ###.#7#A#.###
    #   #1#5#B#.#
    #   #0#4#9#.#
    #   #2#6#8#3#
    #   #########
    (3,18),
    (3,14),
    (3,10),
    (3,4),
    (3,3),
    (3,2),
    (3,7),
    # #############
    # #CE.......DF#
    # ###3#7#A#.###
    #   #1#5#B#.#
    #   #0#4#9#.#
    #   #2#6#8#.#
    #   #########
    (13,10),
    (13,14),
    (13,18),
    (13,22),
    # #############
    # #CE........F#
    # ###3#7#A#.###
    #   #1#5#B#.#
    #   #0#4#9#.#
    #   #2#6#8#D#
    #   #########
    (15,5),
    (15,10),
    (15,14),
    (15,18),
    # #############
    # #CE.........#
    # ###3#7#A#.###
    #   #1#5#B#.#
    #   #0#4#9#F#
    #   #2#6#8#D#
    #   #########
    (14,2),
    (14,3),
    (14,4),
    (14,10),
    (14,14),
    # #############
    # #C..........#
    # ###3#7#A#.###
    #   #1#5#B#E#
    #   #0#4#9#F#
    #   #2#6#8#D#
    #   #########
    (12,1),
    (12,2),
    (12,3),
    (12,4),
    (12,10),
    # #############
    # #...........#
    # ###3#7#A#C###
    #   #1#5#B#E#
    #   #0#4#9#F#
    #   #2#6#8#D#
    #   #########

    # #############
    # #01.2.3.4.56#
    # ###7#8#9#0###
    #   #1#2#3#4#
    #   #5#6#7#8#
    #   #9#0#1#2#
    #   #########
    ]
    r = score_large(pods, steps)
    print(f"Energy used = {r}")
